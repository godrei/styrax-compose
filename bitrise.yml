---
format_version: '11'
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git
project_type: android

app:
  envs:
  - PROJECT_LOCATION: "."
  - MODULE: app
  - VARIANT: ''
  - KEYSTORE_KEY_ALIAS: dummy
  - KEYSTORE_KEY_PASSWORD: dummy
  - KEYSTORE_PATH: dummy
  - KEYSTORE_PASSWORD: dummy

workflows:
  # primary workflows for testing nested bitrise run commands
  nesting_level_5:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run nesting_level_5_child_1

  nesting_level_10:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run nesting_level_10_child_1

  # utility workflows for running nested bitrise run commands
  nesting_level_10_child_1:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run nesting_level_10_child_2

  nesting_level_10_child_2:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run nesting_level_10_child_3

  nesting_level_10_child_3:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run nesting_level_10_child_4

  nesting_level_10_child_4:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run nesting_level_10_child_5

  nesting_level_10_child_5:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run nesting_level_10_child_6

  nesting_level_10_child_6:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run nesting_level_10_child_7

  nesting_level_10_child_7:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run nesting_level_10_child_8

  nesting_level_10_child_8:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run nesting_level_10_child_9

  nesting_level_10_child_9:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run android_uitest

  nesting_level_5_child_1:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run nesting_level_5_child_2

  nesting_level_5_child_2:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run nesting_level_5_child_3

  nesting_level_5_child_3:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run nesting_level_5_child_4

  nesting_level_5_child_4:
    steps:
    - script:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex
            bitrise run android_uitest

  android_uitest:
    steps:
    - avd-manager@1: {}
    - wait-for-android-emulator@1: {}
    - script@1:
        inputs:
        - content: |-
            #!/usr/bin/env bash
            set -ex

            ./gradlew connectedFreeDebugAndroidTest
